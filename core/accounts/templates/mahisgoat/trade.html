{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>{{ heading }}</h1>
    <p>Current Date: {{ current_date }}</p>

    <!-- Add Seller Section -->
    <div class="section">
        <h3>Add New Seller</h3>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                {{ seller_form.name.label_tag }}
                {{ seller_form.name }}
                {% if seller_form.name.errors %}
                    <div class="error-message">
                        {{ seller_form.name.errors }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ seller_form.pendingAmount.label_tag }}
                {{ seller_form.pendingAmount }}
            </div>
            <button type="submit" name="seller_submit" class="btn">Save Seller</button>
        </form>
    </div>

    <!-- Add Trade Section -->
    <div class="section">
        <h3>Add Daily Trade</h3>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                {{ trade_form.seller.label_tag }}
                {{ trade_form.seller }}
            </div>
            <div class="form-group">
                {{ trade_form.todayPurchase.label_tag }}
                {{ trade_form.todayPurchase }}
            </div>
            <div class="form-group">
                {{ trade_form.amPayment.label_tag }}
                {{ trade_form.amPayment }}
            </div>
            <div class="form-group">
                {{ trade_form.pmPayment.label_tag }}
                {{ trade_form.pmPayment }}
            </div>
            <button type="submit" name="trade_submit" class="btn">Save Trade</button>
        </form>
    </div>

    <!-- Filter Section -->
    <div class="section">
        <h3>Filter Records</h3>
        <form method="get">
            <div class="filter-option">
                <label>
                    <input type="checkbox" name="unique_names" 
                        {% if unique_names %}checked{% endif %}>
                    Show Last Record per Seller
                </label>
            </div>
            <div class="date-filters">
                <input type="date" name="start_date" class="form-control">
                <input type="date" name="end_date" class="form-control">
            </div>
            <div class="filter-buttons">
                <button type="submit" class="btn">Apply Filters</button>
                <a href="{% url 'mahisgoat_trade' %}" class="btn">Clear All</a>
            </div>
        </form>
    </div>

    <!-- Trade Records Table -->
    <div class="section">
        <h3>Trade Records</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Seller</th>
                    <th>Purchase</th>
                    <th>AM Payment</th>
                    <th>PM Payment</th>
                    <th>New Pending</th>
                </tr>
            </thead>
            <tbody>
                {% for trade in trades %}
                <tr>
                    <td>{{ trade.date }}</td>
                    <td>{{ trade.seller.name }}</td>
                    <td>{{ trade.todayPurchase }}</td>
                    <td>{{ trade.amPayment }}</td>
                    <td>{{ trade.pmPayment }}</td>
                    <td>{{ trade.new_pending }}</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="2">Totals</th>
                    <th>{{ total_purchase }}</th>
                    <th>{{ total_am }}</th>
                    <th>{{ total_pm }}</th>
                    <th>{{ total_new_pending }}</th>
                </tr>
            </tfoot>
        </table>
        <a href="{% url 'export_mahisgoat_trade' %}?{{ request.GET.urlencode }}" 
            class="btn" 
            style="margin-top: 15px;">
            Export to Excel
        </a>
    </div>

    <a href="{% url 'mahisgoat_main' %}" class="btn back">Back to MAHISGOAT</a>
</div>

<style>
.filter-option {
    margin-bottom: 15px;
}

.filter-option label {
    display: flex;
    align-items: center;
    gap: 8px;
}

.date-filters {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

.filter-buttons {
    display: flex;
    gap: 10px;
    margin-top: 10px;
}

.form-control {
    padding: 6px 12px;
    border-radius: 4px;
    border: 1px solid #ddd;
}

.table td, .table th {
    text-align: center;
    vertical-align: middle;
}
</style>
{% endblock %}




































































{% comment %} {% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>{{ heading }}</h1>
    <!-- Add your specific content here later -->
    <a href="{% url 'mahisgoat_main' %}" class="btn back">Back to MAHISGOAT</a>
</div>
{% endblock %} {% endcomment %}